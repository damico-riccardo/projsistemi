<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>proj-sistemi | Dashboard</title>

  <!-- CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

  <!-- Plotly CDN -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js" defer></script>

  <!-- JS -->
  <script src="{{ url_for('static', filename='js/scripts.js') }}" defer></script>
  <script src="{{ url_for('static', filename='js/dashboard.js') }}" defer></script>
</head>
<body>

  <!-- ===== HEADER + NAVBAR ===== -->
  <header>
    <h1>Dashboard meteo</h1>
    <nav style="margin-top:1rem;">
      <a href="{{ url_for('home') }}" style="margin-right:1.5rem; color:#38bdf8;">Home</a>
      <a href="{{ url_for('dashboard') }}" style="margin-right:1.5rem; color:#38bdf8;">Dashboard</a>
      <a href="{{ url_for('risk') }}" style="color:#38bdf8;">Rischio</a>
    </nav>

    <!-- ===== SEARCH BAR ===== -->
<div style="margin-top:1rem; text-align:center;">
    <input type="text" id="searchInput" placeholder="Cerca pagina..." class="search-bar">
    <button onclick="searchPage()" class="search-btn">Vai</button>
</div>

<style>
/* Stile elegante per la searchbar */
.search-bar {
    padding: 0.6rem 1rem;
    width: 250px;
    border-radius: 25px;
    border: 1px solid #38bdf8;
    outline: none;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
}

.search-bar:focus {
    border-color: #0ea5e9;
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
}

.search-btn {
    padding: 0.6rem 1.2rem;
    margin-left: 0.5rem;
    border-radius: 25px;
    background: #38bdf8;
    color: white;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
}

.search-btn:hover {
    background: #0ea5e9;
}
</style>

<script>
function searchPage() {
    const query = document.getElementById("searchInput").value.toLowerCase().trim();
    const pages = {
        "home": "{{ url_for('home') }}",
        "dashboard": "{{ url_for('dashboard') }}",
        "rischio": "{{ url_for('risk') }}",
        "analisi": "{{ url_for('info') }}"
    };
    if(pages[query]) {
        window.location.href = pages[query];
    } else {
        alert("Pagina non trovata!");
    }
}
</script>


  </header>

  <main class="container">

    <!-- ===== DATI IN TEMPO REALE ===== -->
    <div class="grid">
      <div class="card">
        <h2>Temperatura</h2>
        <div class="value" id="tempValue">-- °C</div>
        <div class="label">Ultima misura</div>
      </div>
      <div class="card">
        <h2>Umidità</h2>
        <div class="value" id="humValue">-- %</div>
        <div class="label">Ultima misura</div>
      </div>
      <div class="card">
        <h2>Pressione</h2>
        <div class="value" id="pressValue">-- hPa</div>
        <div class="label">Ultima misura</div>
      </div>
      <div class="card">
        <h2>Vento</h2>
        <div class="value" id="windValue">-- km/h</div>
        <div class="label">Ultima misura</div>
      </div>
    </div>

    <!-- ===== Dati pluviometrici ===== -->
    <div class="card" style="margin-top:2rem;">
      <h2>Dati pluviometrici</h2>
      <div class="value" id="rainValue">-- mm</div>
      <div class="label">Totale precipitazioni giornaliere</div>
    </div>

    <!-- ===== GRAFICI GIORNALIERI ===== -->
    <div class="card" style="margin-top:2rem;">
      <h2>Grafici giornalieri</h2>
      <div id="tempGraph" style="height:300px;"></div>
      <div id="humGraph" style="height:300px; margin-top:1rem;"></div>
      <div id="pressGraph" style="height:300px; margin-top:1rem;"></div>
    </div>

  </main>

  <footer class="site-footer" style="margin-top:2rem; text-align:center; padding:1rem; background:#1e293b; color:white;">
    Progetto sistemi di misura ed elaborazione dati · Stazione Meteo &copy; 2026
</footer>

</body>
</html>
